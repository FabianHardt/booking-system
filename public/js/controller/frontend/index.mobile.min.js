(function () {
  function e(e) {
    var n = $("#calendar-squarebox-template");
    n.length && o(n.html()),
      c.queue(function () {
        $.ajax({
          cache: !1,
          data: { ajax: !0 },
          dataType: "html",
          error: function () {
            c && !u && (window.location.href = e);
          },
          success: function (e) {
            c && !u && (o(e), c.find(".no-ajax").remove(), t());
          },
          url: e,
        }),
          $(this).dequeue();
      });
  }
  function n() {
    c ||
      ((c = $('<div class="panel"></div>').css({
        position: "absolute",
        "z-index": 1200,
      })),
      $("body").prepend(c));
  }
  function o(e) {
    n(), c.clearQueue(), c.css("opacity", 0.01), c.html(e), t(), c.fadeTo(r, 1);
  }
  function t() {
    c && c.position({ my: "center top+8", at: "center bottom", of: i-200 });
  }
  function a() {
    c &&
      ((u = !0),
      c.clearQueue().fadeOut(r, function () {
        c.remove(), (c = void 0), (u = !1);
      }));
  }
  var i,
    c,
    u = !1,
    r = 350;
  $(document).ready(function () {
    (i = $("#mobile-menu-link")),
      i.on("click", function (n) {
        n.preventDefault(), c ? a() : (n.stopPropagation(), e(i.attr("href")));
      }),
      $(window).resize(t),
      $("body").on("click", function (e) {
        if (c) {
          var n = $(e.target);
          n[0] !== c[0] && n.closest(".panel")[0] !== c[0] && a();
        }
      });
  });
})();